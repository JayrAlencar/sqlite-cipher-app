<div ng-controller="editorController">
	<div class="row" ng-init="init()">
		<div class="col-md-4">
			<div class="btn-group" role="group" >
				<button type="button" class="btn btn-default" ng-click="run()"  alt="Execute query"><span class="glyphicon glyphicon-play"></span></button>
			</div>
		</div>
		<div class="col-md-4">
			<select class="form-control" ng-model="connection" ng-options="database as database.alias for database in databases track by database.id">
			</select>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12" >
			<div contenteditable
        	name="myWidget"
        	strip-br="false" class="editor" ng-model="editorContent" ng-change="modifyContent()"></div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="editor">
				<div ng-repeat="res in results">
					<div class="alert {{res.class}}" ng-show="res.type == 'alert'">
						{{res.message}}
					</div>
					<div ng-show="res.type == 'table'">
						<table class="table table-striped">
							<thead>
								<tr>
									<th ng-repeat="field in res.fields">
										{{field}}
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="row in res.rows">
									<td ng-repeat="field in res.fields">
										{{row[field]}}
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
